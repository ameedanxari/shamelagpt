name: All Tests

on:
  push:
    branches: [main]
  pull_request:
    branches: [main]

jobs:
  ios-tests:
    uses: ./.github/workflows/ios-tests.yml
    
  android-tests:
    uses: ./.github/workflows/android-tests.yml
    
  test-summary:
    name: Test Summary
    runs-on: ubuntu-latest
    needs: [ios-tests, android-tests]
    if: always()
    
    steps:
      - name: Check iOS Results
        if: needs.ios-tests.result != 'success' && needs.ios-tests.result != 'skipped'
        run: echo "❌ iOS Tests Failed" && exit 1
        
      - name: Check Android Results
        if: needs.android-tests.result != 'success' && needs.android-tests.result != 'skipped'
        run: echo "❌ Android Tests Failed" && exit 1

      - name: All Green
        run: echo "✅ All platforms passed!"
